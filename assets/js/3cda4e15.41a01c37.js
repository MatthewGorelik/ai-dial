"use strict";(self.webpackChunkdial=self.webpackChunkdial||[]).push([[122],{7577:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>a});var t=i(5893),r=i(1151);const s={},d="Configuration",o={id:"Deployment/configuration",title:"Configuration",description:"Refer to the provided example of config, where you can find the description of the application-specific parameters.",source:"@site/docs/Deployment/configuration.md",sourceDirName:"Deployment",slug:"/Deployment/configuration",permalink:"/ai-dial/Deployment/configuration",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Azure Model Deployment",permalink:"/ai-dial/Deployment/Azure Model Deployment"}},c={},a=[{value:"Front-End Parameters",id:"front-end-parameters",level:2},{value:"Back-End Parameters",id:"back-end-parameters",level:2},{value:"proxy.config.json parameters",id:"proxyconfigjson-parameters",level:3},{value:"Configuration of Adapters",id:"configuration-of-adapters",level:2}];function l(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["Refer to the provided ",(0,t.jsx)(n.a,{target:"_blank",href:i(1457).Z+"",children:"example of config"}),", where you can find the description of the application-specific parameters."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"dialConfig.yaml"})," configuration file of the AI DIAL application is comprised of several main sections:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Standard parameters of helm chart. Refer to ",(0,t.jsx)(n.a,{href:"https://helm.sh/",children:"Helm docs"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"#front-end-parameters",children:"Front-end parameters"}),": in ",(0,t.jsx)(n.code,{children:"env"})," and ",(0,t.jsx)(n.code,{children:"secrets"})," sections in config."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"#back-end-parameters",children:"Back-end parameters"}),": in ",(0,t.jsx)(n.code,{children:"proxy"})," section in the config."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"#configuration-of-adapters",children:"Configuration of Adapters for models"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Important"}),": it is assumed that you have a working knowledge of standard Helm chart parameters in order to define them within the configuration file."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"front-end-parameters",children:"Front-End Parameters"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["Refer to the ",(0,t.jsx)(n.a,{href:"https://github.com/epam/ai-dial-chat#environment-variables",children:"AI DIAL Chat"})," to view a complete documentation."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Configure front-end parameters in the ",(0,t.jsx)(n.a,{target:"_blank",href:i(1457).Z+"#L18",children:(0,t.jsx)(n.code,{children:"env"})})," and ",(0,t.jsx)(n.a,{target:"_blank",href:i(1457).Z+"#L30",children:(0,t.jsx)(n.code,{children:"secrets"})})," sections of the config file:"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"NEXTAUTH_URL"}),(0,t.jsxs)(n.td,{children:["Public URL of the application. When deploying to production, set the ",(0,t.jsx)(n.code,{children:"NEXTAUTH_URL"})," environment variable to the canonical URL of your site."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"NEXTAUTH_SECRET"}),(0,t.jsx)(n.td,{children:"A random string used as a ceed for authentication. Used to encrypt the NextAuth.js JWT, and to hash email verification tokens."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"NEXT_PUBLIC_DEFAULT_TEMPERATURE"}),(0,t.jsx)(n.td,{children:"Default temperature settings in the range: [0 1]"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"NEXT_PUBLIC_DEFAULT_SYSTEM_PROMPT"}),(0,t.jsx)(n.td,{children:"The default system prompt."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"NEXT_PUBLIC_APP_NAME"}),(0,t.jsx)(n.td,{children:"Public Application Name"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"OPENAI_API_HOST"}),(0,t.jsx)(n.td,{children:"AI DIAL back-end URL."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"OPENAI_API_KEY"}),(0,t.jsx)(n.td,{children:"Open AI API Key."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"OPENAI_API_VERSION"}),(0,t.jsx)(n.td,{children:"Version of the OpenAI API."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"DEFAULT_MODEL"}),(0,t.jsx)(n.td,{children:"Default LLM."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"ENABLED_FEATURES"}),(0,t.jsx)(n.td,{children:"A list of UI features."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"NEXT_PUBLIC_APP_NAME"}),(0,t.jsx)(n.td,{children:"Application name."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"AVAILABLE_MODELS_USERS_LIMITATIONS"}),(0,t.jsx)(n.td,{children:"Specify models and users that have access to them. Skip to allow all users to access all models."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"AVAILABLE_ADDONS_USERS_LIMITATIONS"}),(0,t.jsx)(n.td,{children:"Specify Addons and users that have access to them. Skip to allow all users to access all Addons."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"CLIENT_ID"}),(0,t.jsx)(n.td,{children:"You client id at auth provider."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"TENANT_ID"}),(0,t.jsx)(n.td,{children:"You tenant id at auth provider."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"SECRET"}),(0,t.jsx)(n.td,{children:"You secret at auth provider."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"NAME"}),(0,t.jsx)(n.td,{children:"Display name in AI DIAL app."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"HOST"}),(0,t.jsx)(n.td,{children:"Auth provider URL."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"AUDIENCE"}),(0,t.jsx)(n.td,{children:"Your audience at auth provider."})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"back-end-parameters",children:"Back-End Parameters"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["Refer to the ",(0,t.jsx)(n.a,{href:"https://github.com/epam/ai-dial-core",children:"AI DIAL Core"})," to view a complete documentation."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Configure back-end parameters in the ",(0,t.jsx)(n.a,{target:"_blank",href:i(1457).Z+"#L74",children:(0,t.jsx)(n.code,{children:"proxy"})})," section of the config file."]}),"\n",(0,t.jsxs)(n.p,{children:["You can provide dynamic or static configurations for the back-end. Provide path to the corresponding configuration in the ",(0,t.jsx)(n.code,{children:"proxy.env"})," section."]}),"\n",(0,t.jsx)(n.p,{children:"Static settings are configured at application startup and do not change throughout the application lifecycle."}),"\n",(0,t.jsx)(n.p,{children:"Priority order of configurations:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'Environment variables with extra "proxy." prefix. E.g. "proxy.server.port", "proxy.config.files".'}),"\n",(0,t.jsx)(n.li,{children:'File specified in "PROXY_SETTINGS" environment variable.'}),"\n",(0,t.jsx)(n.li,{children:"Default resource file: src/main/resources/proxy.settings.json."}),"\n"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Default Value"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"config.files"}),(0,t.jsx)(n.td,{children:"proxy.config.json"}),(0,t.jsx)(n.td,{children:"Config files with parts of the whole config."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"config.reload"}),(0,t.jsx)(n.td,{children:"60000"}),(0,t.jsx)(n.td,{children:"Config reload interval in milliseconds."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"identityProvider.jwksUrl"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"URL to the jwks provider."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"identityProvider.appName"}),(0,t.jsx)(n.td,{children:"dial"}),(0,t.jsx)(n.td,{children:'App name to search in "resource_access" claim of JWT token to check access for deployments.'})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"identityProvider.loggingKey"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"User information to search in claims of JWT token."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"identityProvider.loggingSalt"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"Salt to hash user information for logging."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"identityProvider.cacheSize"}),(0,t.jsx)(n.td,{children:"10"}),(0,t.jsx)(n.td,{children:"How many JWT tokens to cache."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"identityProvider.cacheExpiration"}),(0,t.jsx)(n.td,{children:"10"}),(0,t.jsx)(n.td,{children:"How long to retain JWT tokens in cache."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"identityProvider.cacheExpirationUnit"}),(0,t.jsx)(n.td,{children:"MINUTES"}),(0,t.jsx)(n.td,{children:"Unit of cache expiration."})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["This file includes standard ",(0,t.jsx)(n.a,{href:"https://cloud.google.com/vertex-ai/docs/start/client-libraries",children:"Vertex library configurations"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Dynamic"})," settings are defined in the ",(0,t.jsx)(n.code,{children:"proxy.config.json"})," file by default. You can override settings in this file by configuring static settings."]}),"\n",(0,t.jsx)(n.h3,{id:"proxyconfigjson-parameters",children:"proxy.config.json parameters"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["Refer to the ",(0,t.jsx)(n.a,{target:"_blank",href:i(1457).Z+"#L112",children:"confuration file"})," to view an example."]}),"\n"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"routes"}),(0,t.jsx)(n.td,{children:"Path(s)  Paths to route to specific upstreams or to respond with configured body."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"route-rate"}),(0,t.jsx)(n.td,{children:"Parameters for vote endpoint."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"applications"}),(0,t.jsxs)(n.td,{children:["A list of deployed AI DIAL Applications and their parameters:",(0,t.jsx)("br",{}),(0,t.jsx)(n.code,{children:"endpoint"}),": AI DIAL Application API for chat completions.",(0,t.jsx)("br",{}),(0,t.jsx)(n.code,{children:"iconUrl"}),": a path to the icon used for the AI DIAL Application on the UI.",(0,t.jsx)("br",{}),(0,t.jsx)(n.code,{children:"description"}),": a brief description of the AI DIAL Application rendered on the UI.",(0,t.jsx)("br",{}),(0,t.jsx)(n.code,{children:"displayName"}),": a name of the AI DIAL Application used on the UI."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"models"}),(0,t.jsxs)(n.td,{children:["A list of deployed models and their parameters:",(0,t.jsx)("br",{}),(0,t.jsx)(n.code,{children:"type"}),": specify ",(0,t.jsx)(n.code,{children:"chat"})," or ",(0,t.jsx)(n.code,{children:"embedding"})," model type.",(0,t.jsx)("br",{}),(0,t.jsx)(n.code,{children:"iconUrl"}),": a path to the icon used for the model on the UI.",(0,t.jsx)("br",{}),(0,t.jsx)(n.code,{children:"description"}),": a brief description of the model rendered on the UI.",(0,t.jsx)("br",{}),(0,t.jsx)(n.code,{children:"displayName"}),": a name of the model rendered on the UI.",(0,t.jsx)("br",{}),(0,t.jsx)(n.code,{children:"endpoint"}),": model API for chat completions or embeddings.",(0,t.jsx)("br",{}),(0,t.jsx)(n.code,{children:"upstreams"}),": upstreams are used for load-balancing. A request will be sent to the configured model endpoint and will contain X-UPSTREAM-ENDPOINT and X-UPSTREAM-KEY headers:",(0,t.jsx)("br",{}),(0,t.jsx)(n.code,{children:"endpoint"}),": model endpoint.",(0,t.jsx)("br",{}),(0,t.jsx)(n.code,{children:"key"}),": your API key."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"keys"}),(0,t.jsxs)(n.td,{children:["API Keys parameters:",(0,t.jsx)("br",{}),(0,t.jsx)(n.code,{children:"<proxyKey>"}),": your API key.",(0,t.jsx)("br",{}),(0,t.jsx)(n.code,{children:"project"}),": a project name this key is assigned to.",(0,t.jsx)("br",{}),(0,t.jsx)(n.code,{children:"role"}),": name of one of the configured roles. Defines permissions for the key.",(0,t.jsx)("br",{}),(0,t.jsx)(n.code,{children:"userAuth"}),": can be disabled/enabled/optional.",(0,t.jsx)("br",{}),(0,t.jsx)(n.strong,{children:"Disabled"})," - Authorization header is ignored and not sent to upstream.",(0,t.jsx)("br",{}),(0,t.jsx)(n.strong,{children:"Enabled"})," - Authorization header is required and sent to upstream. Optional - Authorization header is optional and sent to upstream if present."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"roles"}),(0,t.jsxs)(n.td,{children:["A list of configured roles with their limitations. Specify a role name and in limits, specify models (can be models, Applications, Addons, Assistants) and limitation configurations:",(0,t.jsx)("br",{}),(0,t.jsx)(n.code,{children:"minute"}),": the total tokens per minute limit that can be sent to the model is managed using a floating window approach. This technique ensures a well-distributed rate-limiting mechanism, allowing control over the number of tokens sent to the model within a defined time frame, typically a one-minute window.",(0,t.jsx)("br",{}),(0,t.jsx)(n.code,{children:"day"}),": the total tokens per day limit that can be sent to the model is managed using a floating window approach. This method ensures a balanced rate-limiting mechanism, allowing control over the number of tokens sent to the model within a specified time frame, typically a 24-hour window."]})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"configuration-of-adapters",children:"Configuration of Adapters"}),"\n",(0,t.jsx)(n.p,{children:"To work with Azure, AWS or GCP models we use applications called Adapters. You can configure Adapters in the configuration file."}),"\n",(0,t.jsx)(n.p,{children:"Refer to these repositories to view a complete documentation for:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/epam/ai-dial-adapter-bedrock",children:"Adapter for Bedrock"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/epam/ai-dial-adapter-vertexai",children:"Adapter for Vertex"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/epam/ai-dial-adapter-openai",children:"Adapter for OpenAI"})}),"\n"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["Refer to the provided ",(0,t.jsx)(n.a,{target:"_blank",href:i(1457).Z+"#L263",children:"example of config"})," to view configuration examples."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},1457:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/files/dialConfig-ecec23366b4be943e2b9b37f2f6d2373.yaml"},1151:(e,n,i)=>{i.d(n,{Z:()=>o,a:()=>d});var t=i(7294);const r={},s=t.createContext(r);function d(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);